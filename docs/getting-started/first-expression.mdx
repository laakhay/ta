# First Expression Walkthrough

This page shows the full lifecycle: parse -> validate -> compile -> preview -> run.

```python
from laakhay.ta.expr.dsl import parse_expression_text, compile_expression
from laakhay.ta.expr.runtime import validate, analyze, preview

expr_text = "close < fib_level_down(level=0.618, left=3, right=3, leg=1) and rsi(14) < 45"

ast_expr = parse_expression_text(expr_text)
validation = validate(ast_expr)
analysis = analyze(ast_expr)
compiled = compile_expression(ast_expr)
```

## Validation and Analysis

```python
assert validation.valid, validation.errors
print(validation.warnings)
print(analysis.required_sources)
print(analysis.min_lookback)
```

- `validate(...)` checks syntax, indicator existence, params, and optional capability warnings.
- `analyze(...)` reports requirements and lookback implications.

## Preview Execution

```python
out = preview(expr_text, dataset=dataset)
print(out.trim)
print(len(out.triggers))
print(out.indicator_series.keys())
```

Use `preview` when you need:

- signal output series,
- trigger timestamps,
- extracted indicator output series,
- computed trim.

## Production Tip

Treat `validate` and `analyze` as deployment gates:

1. block if `valid=False`,
2. review warnings,
3. verify requirements match available data feeds.

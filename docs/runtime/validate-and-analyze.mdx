# Validate & Analyze

## `validate(...)`

```python
from laakhay.ta.expr.runtime import validate

v = validate("close > sma(20)", exchange="binance")
print(v.valid, v.errors, v.warnings)
```

Checks include:

- parse correctness,
- indicator existence,
- parameter sanity,
- select field whitelist,
- compile viability,
- optional capability warnings.

## `analyze(...)`

```python
from laakhay.ta.expr.runtime import analyze

a = analyze("BTCUSDT.trades.volume > sma(20)", exchange="binance")
print(a.required_sources)
print(a.required_timeframes)
print(a.min_lookback)
```

Adds:

- required source/field metadata,
- inferred lookback,
- plan information when available.

## Recommended Deployment Gate

1. reject if `valid` is false,
2. inspect warnings,
3. compare `required_sources` and fields with your live feed contract,
4. ensure lookback coverage exists before first signal.

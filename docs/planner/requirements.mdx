# Requirements Model

## Core Requirement Types

`DataRequirement` fields:

- `source` (`ohlcv`, `trades`, `orderbook`, `liquidation`)
- `field`
- `symbol` (optional)
- `exchange` (optional)
- `timeframe` (optional)
- `min_lookback`

`SignalRequirements` contains:

- `data_requirements`
- `time_based_queries`

## How Lookback Is Derived

- planner starts from root requirement,
- propagates through indicator windows and dependencies,
- merges per-source/field maximum lookback.

Indicator metadata (`lookback_params`, `default_lookback`) is used for deterministic trim inference.

## Example

```python
from laakhay.ta.expr.runtime import analyze

result = analyze("close > sma(50) and BTCUSDT.trades.volume > sma(20)")
for req in result.data_requirements:
    print(req.source, req.field, req.min_lookback)
```

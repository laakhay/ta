# Syntax

## Expression Form

Expressions are Python `eval`-style, then mapped to strategy nodes.

```python
"(close > sma(20)) and (rsi(14) < 70)"
```

Supported operators:

- arithmetic: `+ - * / % **`
- comparison: `> >= < <= == !=`
- boolean: `and or not`
- unary: `+x -x`

## Indicator Calls

```python
"sma(20)"
"ema(period=50)"
"fib_level_down(level=0.618, left=3, right=3, leg=1)"
```

Parameter aliasing:

- `lookback` is normalized to `period` for indicators that use period semantics.

## Bare Identifiers

Known field identifiers (like `close`, `high`, `volume`, `hlc3`) map to `select(field=...)` automatically.

## Validation Rules

- Unknown indicators fail parse/validation.
- Unknown params fail parse.
- Duplicate positional+keyword for same param fails.
- Some indicators allow nested expression parameters; most require literals.

## Unsupported / Current Limitations

- No direct tuple output projection in DSL (for example `macd(...).signal`).
- Attribute-chain timeframe token uses Python-valid formats like `h1`, `m15` in chained identifiers.

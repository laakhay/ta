# Expression Language

The DSL compiles Python-like expression text into a typed expression graph.

## What You Can Express

- Indicator calls: `sma(20)`, `fib_level_down(level=0.618, left=3, right=3)`
- Algebra/comparisons: `close > ema(50)`, `(high - low) / close`
- Boolean logic: `and`, `or`, `not`
- Source attributes: `BTCUSDT.trades.volume`, `binance.BTCUSDT.orderbook.imbalance`
- Source transforms: `trades.filter(amount > 1_000_000).count`
- Time-shifts: `price.24h_ago`, `volume.change_pct_24h`

## Parse and Compile

```python
from laakhay.ta.expr.dsl import parse_expression_text, compile_expression

ast_expr = parse_expression_text("close > sma(20) and rsi(14) > 50")
compiled = compile_expression(ast_expr)
```

## Key Constraint

Named tuple-output selection is not yet supported in DSL compile path. Use single-output wrappers (`stoch_k`, `stoch_d`, `bb_upper`, `bb_lower`, `fib_level_*`, `fib_anchor_*`).

Continue with:

- `syntax`
- `data-sources`
- `indicator-inputs`
- `filters-aggregations-timeshifts`

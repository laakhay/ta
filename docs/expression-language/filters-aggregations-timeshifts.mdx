# Filters, Aggregations & Time Shifts

## Filters

```python
"BTCUSDT.trades.filter(amount > 1000000).count > 5"
```

`filter(...)` keeps points where condition is true.

## Aggregations

Supported operations:

- property: `.count`
- function-style: `.sum(field)`, `.avg(field)`, `.max(field)`, `.min(field)`

Examples:

```python
"BTCUSDT.trades.count > 100"
"BTCUSDT.trades.sum(amount) > 50000000"
"BTCUSDT.orderbook.avg(imbalance) > 0.1"
```

## Time Shift Suffixes

Supported suffix styles include:

- simple ago: `24h_ago`, `1h_ago`
- operation-based: `change_pct_24h`, `change_1h`, `roc_24`

Examples:

```python
"BTCUSDT.price.24h_ago < BTCUSDT.price"
"BTCUSDT.volume.change_pct_24h > 10"
```

## Notes

- Time-shift behavior is represented as `TimeShiftExpression` in planning/runtime.
- Ensure your dataset coverage includes the shift horizon; otherwise values may be unavailable or invalid.
